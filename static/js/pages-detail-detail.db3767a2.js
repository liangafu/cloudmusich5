(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-detail-detail"],{"0b52":function(t,a,i){"use strict";var e=i("4ea4");i("acd8"),i("ac1f"),i("5319"),i("1276"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e(i("ade3")),o=i("e49d");i("8050");var c,l=e(i("4d91")),s={data:function(){return{songDetail:{},songSimi:[],songComment:[],songLyric:[],lyricIndex:0,playicon:"icon-zanting",isplayrotate:!0}},comments:{musicheader:l.default},onLoad:function(t){this.playMusic(t.songId)},onUnload:function(){this.cancelLyricIndex(),this.bgAudioMannager.destroy()},onHide:function(){this.cancelLyricIndex(),this.bgAudioMannager.destroy()},methods:(c={playMusic:function(t){var a=this;(0,o.songDetail)(t).then((function(t){a.songDetail=t[1].data.songs[0],console.log(t)})),(0,o.songSimi)(t).then((function(t){"200"==t[1].data.code&&(a.songSimi=t[1].data.songs)})),(0,o.songComment)(t).then((function(t){"200"==t[1].data.code&&(a.songComment=t[1].data.hotComments)})),(0,o.songLyric)(t).then((function(t){if("200"==t[1].data.code){var i=t[1].data.lrc.lyric,e=[],n=/\[([^\]]+)\]([^[]+)/g;i.replace(n,(function(t,i,n){e.push({time:a.formatTimeToSec(i),lyric:n})})),a.songLyric=e}})),(0,o.songUrl)(t).then((function(t){"200"==t[1].data.code&&(console.log(t),a.bgAudioMannager||(a.bgAudioMannager=uni.createInnerAudioContext()),a.playicon="icon-bofang1",a.isplayrotate=!1,a.bgAudioMannager.src=t[1].data.data[0].url,a.listenLyricIndex(),a.bgAudioMannager.onPlay((function(){a.playicon="icon-zanting",a.isplayrotate=!0,a.listenLyricIndex()})),a.bgAudioMannager.onPause((function(){a.playicon="icon-bofang1",a.isplayrotate=!1,a.cancelLyricIndex()})),a.bgAudioMannager.onEnded((function(){a.playMusic(a.$store.state.nextId)})))}))},handleToPlay:function(){this.bgAudioMannager.paused?this.bgAudioMannager.play():this.bgAudioMannager.pause()},formatTimeToSec:function(t){var a=t.split(":");return(60*parseFloat(a[0])+parseFloat(a[1])).toFixed(2)}},(0,n.default)(c,"handleToPlay",(function(){this.bgAudioMannager.paused?this.bgAudioMannager.play():this.bgAudioMannager.pause()})),(0,n.default)(c,"listenLyricIndex",(function(){var t=this;clearInterval(this.timer),this.timer=setInterval((function(){for(var a=0;a<t.songLyric.length;a++){if(t.songLyric[t.songLyric.length-1].time<t.bgAudioMannager.currentTime){t.lyricIndex=t.songLyric.length-1;break}t.songLyric[a].time<t.bgAudioMannager.currentTime&&t.songLyric[a+1].time>t.bgAudioMannager.currentTime&&(t.lyricIndex=a)}}))})),(0,n.default)(c,"cancelLyricIndex",(function(){clearInterval(this.timer)})),(0,n.default)(c,"handleToSimi",(function(t){this.playMusic(t)})),c)};a.default=s},"66ab":function(t,a,i){var e=i("7abe");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("4f06").default;n("b6c66ba0",e,!0,{sourceMap:!1,shadowMode:!1})},"7abe":function(t,a,i){var e=i("24fb"),n=i("1de5"),o=i("e175"),c=i("0baf"),l=i("967b"),s=i("a6a5"),r=i("37f6");a=e(!1);var d=n(o),u=n(o,{hash:"#iefix"}),v=n(c),m=n(l),f=n(s),g=n(r,{hash:"#iconfont"});a.push([t.i,"@font-face{font-family:iconfont; /* Project id 2966762 */src:url("+d+"); /* IE9 */src:url("+u+') format("embedded-opentype"),url('+v+') format("woff2"),url('+m+') format("woff"),url('+f+') format("truetype"),url('+g+') format("svg")}.iconfont[data-v-6c751c2a]{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-zanting[data-v-6c751c2a]:before{content:"\\e600"}.icon-dianzan[data-v-6c751c2a]:before{content:"\\e601"}.icon-31shouye[data-v-6c751c2a]:before{content:"\\e602"}.icon-fangdajing[data-v-6c751c2a]:before{content:"\\e617"}.icon-zuojiantou[data-v-6c751c2a]:before{content:"\\e64b"}.icon-lajitong[data-v-6c751c2a]:before{content:"\\e637"}.icon-yousanjiao[data-v-6c751c2a]:before{content:"\\e629"}.icon-guanbi[data-v-6c751c2a]:before{content:"\\e6cc"}.icon-bofang[data-v-6c751c2a]:before{content:"\\e624"}.icon-fenxiang[data-v-6c751c2a]:before{content:"\\e618"}.icon-bofang1[data-v-6c751c2a]:before{content:"\\e636"}.detail-play[data-v-6c751c2a]{width:%?580?%;height:%?580?%;background-size:cover;margin:%?210?% auto %?44?% auto;position:relative}.detail-play uni-image[data-v-6c751c2a]{width:%?380?%;height:%?380?%;border-radius:50%;position:absolute;left:0;top:0;right:0;bottom:0;margin:auto;-webkit-animation:10s linear infinite move;animation:10s linear infinite move;-webkit-animation-play-state:paused;animation-play-state:paused}.detail-play uni-text[data-v-6c751c2a]{width:%?100?%;height:%?100?%;font-size:%?100?%;position:absolute;left:0;top:0;right:0;bottom:0;margin:auto;color:#000}.detail-lyric[data-v-6c751c2a]{height:%?246?%;line-height:%?82?%;font-size:%?32?%;text-align:center;color:#949495;overflow:hidden}.active[data-v-6c751c2a]{color:#000}.detail-lyric-wrap[data-v-6c751c2a]{transition:.5s}.detail-lyric-item[data-v-6c751c2a]{height:%?82?%}.detail-like[data-v-6c751c2a]{margin:0 %?32?%}.detail-like-title[data-v-6c751c2a]{font-size:%?36?%;color:#000;margin:%?50?% 0}.detail-like-item[data-v-6c751c2a]{display:flex;margin-bottom:%?38?%;align-items:center}.detail-like-img[data-v-6c751c2a]{width:%?82?%;height:%?82?%;border-radius:%?15?%;overflow:hidden;margin-right:%?20?%}.detail-like-img uni-image[data-v-6c751c2a]{width:100%;height:100%}.detail-like-song[data-v-6c751c2a]{flex:1}.detail-like-song uni-view[data-v-6c751c2a]:nth-child(1){color:#000;font-size:%?30?%;width:70vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:%?10?%}.detail-like-song uni-view[data-v-6c751c2a]:nth-child(2){font-size:%?22?%;color:#a2a2a2;width:70vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.detail-like-song uni-image[data-v-6c751c2a]{width:%?34?%;height:%?22?%;margin-right:%?10?%}.detail-like-item uni-text[data-v-6c751c2a]{font-size:%?50?%;color:#877764}.detail-comment[data-v-6c751c2a]{margin:0 %?32?%}.detail-comment-title[data-v-6c751c2a]{font-size:%?36?%;color:#000;margin:%?50?% 0}.detail-comment-item[data-v-6c751c2a]{display:flex;margin-bottom:%?28?%}.detail-comment-img[data-v-6c751c2a]{width:%?66?%;height:%?66?%;border-radius:50%;overflow:hidden;margin-right:%?18?%}.detail-comment-img uni-image[data-v-6c751c2a]{width:100%;height:100%}.detail-comment-content[data-v-6c751c2a]{flex:1;color:#000}.detail-comment-head[data-v-6c751c2a]{display:flex;justify-content:space-between}.detail-comment-name uni-view[data-v-6c751c2a]:nth-child(1){font-size:%?24?%}.detail-comment-name uni-view[data-v-6c751c2a]:nth-child(2){font-size:%?20?%}.detail-comment-like[data-v-6c751c2a]{font-size:%?30?%}.detail-comment-text[data-v-6c751c2a]{line-height:%?40?%;color:#000;font-size:%?28?%;margin-top:%?16?%;border-bottom:1px #595860 solid;padding-bottom:%?40?%}',""]),t.exports=a},9727:function(t,a,i){"use strict";i.r(a);var e=i("0b52"),n=i.n(e);for(var o in e)"default"!==o&&function(t){i.d(a,t,(function(){return e[t]}))}(o);a["default"]=n.a},a331:function(t,a,i){"use strict";var e=i("66ab"),n=i.n(e);n.a},bad2:function(t,a,i){"use strict";i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return o})),i.d(a,"a",(function(){return e}));var e={musicheader:i("4d91").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"detail"},[e("musicheader",{attrs:{title:t.songDetail.name,icon:!0}}),e("v-uni-view",{staticClass:"container"},[e("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[e("v-uni-view",{staticClass:"detail-play",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleToPlay.apply(void 0,arguments)}}},[e("v-uni-image",{class:{"detail-play-run":t.isplayrotate},attrs:{src:t.songDetail.al.picUrl,mode:""}}),e("v-uni-text",{staticClass:"iconfont",class:t.playicon})],1),e("v-uni-view",{staticClass:"detail-lyric"},[e("v-uni-view",{staticClass:"detail-lyric-wrap",style:{transform:"translateY("+82*-(t.lyricIndex-1)+"rpx)"}},t._l(t.songLyric,(function(a,i){return e("v-uni-view",{key:i,staticClass:"detail-lyric-item",class:{active:t.lyricIndex==i}},[t._v(t._s(a.lyric))])})),1)],1),e("v-uni-view",{staticClass:"detail-like"},[e("v-uni-view",{staticClass:"detail-like-title"},[t._v("喜欢这首歌的人也听")]),e("v-uni-view",{staticClass:"detail-like-list"},t._l(t.songSimi,(function(a,n){return e("v-uni-view",{key:n,staticClass:"detail-like-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleToSimi(a.id)}}},[e("v-uni-view",{staticClass:"detail-like-img"},[e("v-uni-image",{attrs:{src:a.album.picUrl,mode:""}})],1),e("v-uni-view",{staticClass:"detail-like-song"},[e("v-uni-view",[t._v(t._s(a.name))]),e("v-uni-view",[a.privilege.flag>60&&a.privilege.flag<70?e("v-uni-image",{attrs:{src:i("0e1d"),mode:""}}):t._e(),999e3==a.privilege.maxbr?e("v-uni-image",{attrs:{src:i("9aa3"),mode:""}}):t._e(),t._v(t._s(a.artists[0].name)+" - "+t._s(a.name))],1)],1),e("v-uni-text",{staticClass:"iconfont icon-bofang"})],1)})),1)],1),e("v-uni-view",{staticClass:"detail-comment"},[e("v-uni-view",{staticClass:"detail-comment-title"},[t._v("精彩评论")]),t._l(t.songComment,(function(a,i){return e("v-uni-view",{key:i,staticClass:"detail-comment-item"},[e("v-uni-view",{staticClass:"detail-comment-img"},[e("v-uni-image",{attrs:{src:a.user.avatarUrl,mode:""}})],1),e("v-uni-view",{staticClass:"detail-comment-content"},[e("v-uni-view",{staticClass:"detail-comment-head"},[e("v-uni-view",{staticClass:"detail-comment-name"},[e("v-uni-view",[t._v(t._s(a.user.nickname))]),e("v-uni-view",[t._v(t._s(t._f("formatTime")(a.time)))])],1),e("v-uni-view",{staticClass:"detail-comment-like"},[t._v(t._s(t._f("formatCount")(a.likedCount))),e("v-uni-text",{staticClass:"iconfont icon-dianzan"})],1)],1),e("v-uni-view",{staticClass:"detail-comment-text"},[t._v(t._s(a.content))])],1)],1)}))],2)],1)],1)],1)},o=[]},d6f0:function(t,a,i){"use strict";i.r(a);var e=i("bad2"),n=i("9727");for(var o in n)"default"!==o&&function(t){i.d(a,t,(function(){return n[t]}))}(o);i("a331");var c,l=i("f0c5"),s=Object(l["a"])(n["default"],e["b"],e["c"],!1,null,"6c751c2a",null,!1,e["a"],c);a["default"]=s.exports}}]);